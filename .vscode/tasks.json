{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "mkdir",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "mkdir",
            "args": [
                "-p",
                "build"
            ]
        },
        // Windows Debug
        {
            "label": "make-debug-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "-Bbuild/debug",
                "-GNinja",
                "\"-DCMAKE_MAKE_PROGRAM=${NINJA_PROGRAM}\"",
                "\"-DCMAKE_BUILD_TYPE:STRING=Debug\"",
                "\"-DCMAKE_PROJECT_INCLUDE_BEFORE:FILEPATH=${QT_AUTO_SETUP}\"",
                "\"-DCMAKE_PREFIX_PATH:PATH=${CMAKE_PREFIX_PATH}\""
            ],
            "dependsOn": [
                "mkdir"
            ]
        },
        {
            "label": "make-build-debug-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "--build",
                "./build/debug",
                "--target",
                "all"
            ],
            "dependsOn": [
                "make-debug-windows"
            ]
        },
        {
            "label": "make-install-debug-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "--install",
                "./build/debug",
                "--prefix",
                "${workspaceFolder}/build/debug"
            ],
            "dependsOn": [
                "make-build-debug-windows"
            ]
        },
        {
            "label": "run-debug-windows",
            "type": "process",
            "options": {
                "cwd": "${workspaceFolder}/build/debug/bin"
            },
            "command": "IntMusic.exe",
            "dependsOn": [
                "make-install-debug-windows"
            ],
            "problemMatcher": [
                "$gcc"
            ]
        },

        // Mac Debug
        {
            "label": "make-debug-mac",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "${config:QT_CMAKE_PROGRAM_MAC}",
            "args": [
                "\"-S ${workspaceFolder}\"",
                "-Bbuild/debug",
                "-GNinja",
            ],
            "dependsOn": [
                "mkdir"
            ]
        },
        {
            "label": "make-build-debug-mac",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}/build/debug"
            },
            "command": "ninja",
            "args": [],
            "dependsOn": [
                "make-debug-mac"
            ]
        },
        {
            "label": "run-debug-mac",
            "type": "process",
            "options": {
                "cwd": "${workspaceFolder}/build/debug/"
            },
            "command": "open",
            "args": [
                "-a", "IntMusic.app"
            ],
            "dependsOn": [
                "make-build-debug-mac"
            ],
            "problemMatcher": [
                "$gcc"
            ]
        },

        // Windows Release
        {
            "label": "make-release-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "-Bbuild/release",
                "-GNinja",
                "-DCMAKE_MAKE_PROGRAM=${NINJA_PROGRAM}",
                "-DCMAKE_BUILD_TYPE=Release",
                "-DCMAKE_PROJECT_INCLUDE_BEFORE=${QT_AUTO_SETUP}",
                "-DCMAKE_PREFIX_PATH=${CMAKE_PREFIX_PATH}"
            ],
            "dependsOn": ["mkdir"]
        },
        {
            "label": "make-build-release-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "--build",
                "./build/release",
                "--target",
                "all",
                "--config",
                "Release"
            ],
            "dependsOn": ["make-release-windows"]
        },
        {
            "label": "make-install-release-windows",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "cmake",
            "args": [
                "--install",
                "./build/release",
                "--prefix",
                "${workspaceFolder}/build/release"
            ],
            "dependsOn": [
                "make-build-release-windows"
            ]
        },
        {
            "label": "run-release-windows",
            "type": "process",
            "options": {
                "cwd": "${workspaceFolder}/build/release/bin"
            },
            "command": "IntMusic.exe",
            "dependsOn": ["make-install-release-windows"],
            "problemMatcher": ["$gcc"]
        },

        // Mac Release
        {
            "label": "make-release-mac",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "command": "${config:QT_CMAKE_PROGRAM_MAC}",
            "args": [
                "\"-S ${workspaceFolder}\"",
                "-Bbuild/release",
                "-GNinja",
            ],
            "dependsOn": [
                "mkdir"
            ]
        },
        {
            "label": "make-build-release-mac",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}/build/release"
            },
            "command": "ninja",
            "args": [],
            "dependsOn": [
                "make-release-mac"
            ]
        },
        {
            "label": "run-release-mac",
            "type": "process",
            "options": {
                "cwd": "${workspaceFolder}/build/release/"
            },
            "command": "open",
            "args": [
                "-a", "IntMusic.app"
            ],
            "dependsOn": [
                "make-build-release-mac"
            ],
            "problemMatcher": [
                "$gcc"
            ]
        }
    ]
}